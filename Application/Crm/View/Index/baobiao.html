<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>{$title}</title>
    <include file="Public:scripts" />
    <script type="text/javascript" src="/Public/Crm/js/jquery-2.2.3.min.js"></script>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        li{
            list-style: none;
        }
        a{
            text-decoration: none;
            color: #1a1a1a;
        }
        a img{
            border: none;
        }
        html body{
            height: 100%;
        }
        button{
            outline: 0;
            border: 0;
        }
        h1,h2,h3,h4,h5,h6{
            font-weight: normal;
        }
        @charset "utf-8";
        /* CSS Document */

        /*! normalize.css v2.1.3 | MIT License | git.io/normalize */
        /*Html5*/
        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        main,
        nav,
        section,
        summary {
            display: block;
        }
        audio,
        canvas,
        video {
            display: inline-block;
        }
        audio:not([controls]) {
            display: none;
            height: 0;
        }
        /*Base*/
        html{
            background: #fff;
        }
        html {
            font: 10px/1.8 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
        }
        @media only screen and (max-width: 280px){
            html {
                font: 8px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        @media only screen and (max-width: 320px){
            html {
                font: 10px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        @media only screen and (min-width: 320px) and (max-width: 520px) {
            html {
                font: 12px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        @media only screen and (min-width: 520px) and (max-width: 620px) {
            html {
                font: 16px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        @media only screen and (min-width: 620px) and (max-width: 1080px) {
            html {
                font: 18px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        @media only screen and (min-width: 1080px) and (max-width: 1920px) {
            html {
                font: 24px/1.5 "microsoft yahei","\5b8b\4f53", "宋体",Arial,sans-serif;
                -ms-text-size-adjust: 100%;
                -webkit-text-size-adjust: 100%; /*修正手持设备字体变化*/
            }
        }
        body{
            font-family:"microsoft yahei";
        }
        * {
            margin: 0;
            padding: 0;
        }
        a {
            text-decoration: none;
            background: transparent; /*修正win8系统IE连接灰色背景*/
            outline:none;
            blr:expression(this.onFocus=this.blur());
            color:#333;
        }
        a:focus {
            outline: 0;
        }
        a:active,
        a:hover {
            outline: 0;
            /*color:#3366cc;*/
            /*transition:text-shadow 500ms ease-in 0ms, color 500ms ease-in 0ms;*/
        }

        img {
            border: 0;
            vertical-align: middle;
            -ms-interpolation-mode:bicubic;
        }
        fieldset {
            border: 1px solid #c0c0c0;
            margin: 0 2px;
            padding: 0.35em 0.625em 0.75em;
        }
        button,
        input,
        select,
        textarea {
            font-family: inherit;
            font-size: 100%;
            margin: 0;
            outline:none;
        }
        button,
        input {
            line-height: normal;
        }
        button,
        select {
            text-transform: none;
        }
        button,
        html input[type="button"],
        input[type="reset"],
        input[type="submit"] {
            -webkit-appearance: button;
            cursor: pointer;
        }

        button[disabled],
        html input[disabled] {
            cursor: default;
        }
        input[type="checkbox"],
        input[type="radio"] {
            box-sizing: border-box;
            padding: 0;
        }
        input[type="search"] {
            -webkit-appearance: textfield;
            -moz-box-sizing: content-box;
            -webkit-box-sizing: content-box;
            box-sizing: content-box;
        }
        input[type="search"]::-webkit-search-cancel-button,
        input[type="search"]::-webkit-search-decoration {
            -webkit-appearance: none;
        }
        button::-moz-focus-inner,
        input::-moz-focus-inner {
            border: 0;
            padding: 0;
        }
        input.submit {
            border: 0;
            margin: 0;
            cursor: pointer;
        }
        input.radio {
            width: 13px;
            height: 13px;
            float: left;
            display: inline;
        }
        textarea {
            overflow: auto;
            vertical-align: top;
        }
        table {
            border-collapse: collapse;
            border-spacing: 0;
        }
        li {
            list-style:none;
        }
        /*清除浮动*/
        .clear {
            clear: both;
        }
        .fl {
            float:left;
            /*display: inline;*/
        }
        .fr {
            float:right;
            /*display: inline;*/
        }

        .shumu {
            height: 60px;
            background: #FFFFFF;
            width: 100%;
        }

        .shumu li {
            float: left;
            width: 25%;
            text-align: center;
            margin: 9px 0;
            box-sizing: border-box;
            position: relative;
        }

        .shumu li:after {
            position: absolute;
            height: 100%;
            bottom: 0;
            right: 0;
            content: '';
            border-right: 1px solid #ccc;
            -webkit-transform: scaleX(.3);
            transform: scaleX(.3);
        }
        .shumu li:last-child::after {
            border: 0;
        }
        .fr-name {
            color: #999;
            font-size: 12px;
        }

        .fr-num {
            font-size: 16px;
            font-weight: 500;
        }
        .title{
            padding: 12px;
            text-align: center;
            font-size: 16px;
            position: relative;
            background: #f5f5f5;
            font-weight: 600;
        }
        .title a{
            font-weight: normal;
            color: #666;
        }
        .title:before{
            position: absolute;
            width: 100%;
            top: 0;
            right: 0;
            content: '';
            border-top: 1px solid #ccc;
            -webkit-transform: scaley(.3);
            transform: scaley(.3);
        }
        .title:after{
            position: absolute;
            width: 100%;
            bottom: 0;
            right: 0;
            content: '';
            border-top: 1px solid #ccc;
            -webkit-transform: scaley(.3);
            transform: scaley(.3);
        }
        .list>ul{
            margin-top: 10px;
        }
        .listbox li{
            padding: 10px 12px;
            overflow: hidden;
            font-size: 14px;
            position: relative;
            background: #fff;
        }
        .listbox li:after{
            position: absolute;
            width: 100%;
            bottom: 0;
            right: 0;
            content: '';
            border-top: 1px solid #ccc;
            -webkit-transform: scaley(.3);
            transform: scaley(.3);
        }
        .listbox li:last-child::after{
            border: 0;
        }
        .nam{
            float: left;
        }
        .num{
            float: right;
            background: #cccccc;
            border-radius: 12px;
            color: #fff;
            padding: 0 5px;
        }
    </style>
</head>

<body>
<div class="bg" style="background: #fafafa;">
    <section style="background-color: white;height: 30px;margin-bottom: 5px;">
        <ul>
            <li>
                <h4 class="bh" style="text-align: center;">
                    <span onclick="window.history.back();" style="float: left;font-size: 12px;line-height: 30px;">< 返回</span>
                    <span style="font-size: 16px;">{$title}</span></h4>
            </li>
        </ul>
    </section>
    <section class="shumu">
        <ul style="overflow: hidden;">
            <li>
                <div class="fr-name">
                    客户总量
                </div>
                <div class="fr-num">
                    {$cusnum}
                </div>
            </li>
            <li>
                <div class="fr-name">
                    合同总量
                </div>
                <div class="fr-num">
                    {$hetongnum}
                </div>
            </li>
            <li>
                <div class="fr-name">
                    项目总量
                </div>
                <div class="fr-num">
                    {$itemnum}
                </div>
            </li>
            <li>
                <div class="fr-name">
                    成交客户量
                </div>
                <div class="fr-num">
                    {$compnum}
                </div>
            </li>
        </ul>
    </section>
    <section class="list" style="margin-top: 10px;">
        <ul>
            <li>
                <div class="title">
                    <a onclick="showrank('custom')" href="javascript:void(0);" style="float: right;font-size: 12px;line-height: 2;">
                        更多排行
                    </a>
                    <div style="width: 50%;margin: 0 auto;">
                        拥有客户数量
                    </div>
                </div>

            <ul class="listbox">
                <empty name="cusrank">
                    <li>
                    <div class="nam" style="background-color: white;
                    padding: 10px;
                    width: 100%;

                    text-align: center;">
                        暂无数据
                    </div>
                    </li>
                </empty>
                    <style>
                        .list1{background-color: #fae7e7 !important;}
                        /*.list2{background-color: white;color:white;}*/
                    </style>


                    <volist name="cusrank" id="vo" key="k">
                        <?php
                        if($k>3){
                                $css="list2";
                                }else{
                                $css="list1";
                                }
                                ?>
                        <li data-field="custom" data-id="{$vo.staffid}" class="{$css} clickli">
                            <div class="nam">
                                {$k}、{$vo.name}
                            </div>
                            <div class="num">
                                {$vo.sum}
                            </div>
                            <div style="  position: absolute; top: 0px;left: 15px;">
                                <in name="k" value="1,2,3">
                                    <img style="width: 30px;" src="/Public/Admin/stylesheets/images/{$k}.png" />
                                </in>
                            </div>
                        </li>

                    </volist>



                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <div class="title">
                    <a onclick="showrank('contract')" href="javascript:void(0);" style="float: right;font-size: 12px;line-height: 2;">
                        更多排行
                    </a>
                    <div style="width: 50%;margin: 0 auto;">
                        合同数排行
                    </div>
                </div>

                <ul class="listbox">
                    <empty name="contractrank">
                        <li>
                        <div class="nam" style="background-color: white;
                    padding: 10px;
                    width: 100%;
                    text-align: center;">
                            暂无数据
                        </div>
                        </li>
                    </empty>
                    <volist name="contractrank" id="vo" key="k">
                        <?php
                        if($k>3){
                        $css="list2";
                        }else{
                        $css="list1";
                        }
                        ?>
                        <li data-field="contract" data-id="{$vo.masterid}" class="{$css} clickli">
                            <div class="nam">
                                {$k}、{$vo.name}
                            </div>
                            <div class="num">
                                {$vo.sum}
                            </div>
                            <div style="  position: absolute; top: 0px;left: 15px;">
                                <in name="k" value="1,2,3">
                                    <img style="width: 30px;" src="/Public/Admin/stylesheets/images/{$k}.png" />
                                </in>
                            </div>
                        </li>

                    </volist>

                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <div class="title">
                    <a onclick="showrank('contractamount')" href="javascript:void(0);" style="float: right;font-size: 12px;line-height: 2;">
                        更多排行
                    </a>
                    <div style="width: 50%;margin: 0 auto;">
                        合同金额
                    </div>
                </div>

                <ul class="listbox">
                    <empty name="conamountrank">
                        <li>
                        <div class="nam" style="background-color: white;
                    padding: 10px;
                    width: 100%;
                    text-align: center;">
                            暂无数据
                        </div>
                        </li>
                    </empty>
                    <volist name="conamountrank" id="vo" key="k">
                        <?php
                        if($k>3){
                        $css="list2";
                        }else{
                        $css="list1";
                        }
                        ?>
                        <li data-field="contractamount" data-id="{$vo.masterid}" class="{$css} clickli">
                            <div class="nam">
                                {$k}、{$vo.name}
                            </div>
                            <div class="num">
                                {$vo.sum}
                            </div>
                            <div style="  position: absolute; top: 0px;left: 15px;">
                                <in name="k" value="1,2,3">
                                    <img style="width: 30px;" src="/Public/Admin/stylesheets/images/{$k}.png" />
                                </in>
                            </div>
                        </li>

                    </volist>
                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <div class="title">
                    <a onclick="showrank('item')" href="javascript:void(0);" style="float: right;font-size: 12px;line-height: 2;">
                        更多排行
                    </a>
                    <div style="width: 50%;margin: 0 auto;">
                        项目排行
                    </div>
                </div>

                <ul class="listbox">
                    <empty name="itemrank">
                        <li>
                        <div class="nam" style="background-color: white;
                    padding: 10px;
                    width: 100%;
                    text-align: center;">
                            暂无数据
                        </div>
                        </li>
                    </empty>
                    <volist name="itemrank" id="vo" key="k">
                        <?php
                        if($k>3){
                        $css="list2";
                        }else{
                        $css="list1";
                        }
                        ?>
                        <li data-field="item" data-id="{$vo.masterid}" class="{$css} clickli">
                            <div class="nam">
                                {$k}、{$vo.name}
                            </div>
                            <div class="num">
                                {$vo.sum}
                            </div>
                            <div style="  position: absolute; top: 0px;left: 15px;">
                                <in name="k" value="1,2,3">
                                    <img style="width: 30px;" src="/Public/Admin/stylesheets/images/{$k}.png" />
                                </in>
                            </div>
                        </li>

                    </volist>
                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <div class="title">
                    <a  onclick="showrank('follow')" href="javascript:void(0);" style="float: right;font-size: 12px;line-height: 2;">
                        更多排行
                    </a>
                    <div style="width: 50%;margin: 0 auto;">
                        跟进排行
                    </div>
                </div>

                <ul class="listbox">
                    <empty name="followrank">
                        <li>
                        <div class="nam" style="background-color: white;
                    padding: 10px;
                    width: 100%;
                    text-align: center;">
                            暂无数据
                        </div>
                        </li>
                    </empty>
                    <volist name="followrank" id="vo" key="k">
                        <?php
                        if($k>3){
                            $css="list2";
                            }else{
                            $css="list1";
                            }
                            ?>
                        <li data-field="follow" data-id="{$vo.staffid}" class="{$css} clickli">
                            <div class="nam">
                                {$k}、{$vo.name}
                            </div>
                            <div class="num">
                                {$vo.sum}
                            </div>
                            <div style="  position: absolute; top: 0px;left: 15px;">
                                <in name="k" value="1,2,3">
                                    <img style="width: 30px;" src="/Public/Admin/stylesheets/images/{$k}.png" />
                                </in>
                            </div>
                        </li>
                    </volist>
                </ul>
            </li>
        </ul>
    </section>
</div>
<script type="text/javascript ">
    $(document).ready(function() {
        var h = $(window).height();
        $(".bg").css(
                "height", h
        )
    })
</script>
<script type="text/javascript">
    $("body").on('click',".listbox .clickli", function () {
        var type=$(this).attr('data-field');
        var masterid=$(this).attr('data-id');
        var title="";
        switch(type){
            case 'custom':
                title="客户详细";
                break;
            case 'contract':
                title="合同详细";
                break;
            case 'contractamount':
                title="合同金额详细";
                break;
            case 'item':
                title="项目详细";
                break;
            case 'follow':
                title="跟进详细";
                break;
        }
        var $url= "/Crm/Index/showrankdetail?type="+type+"&masterid="+masterid;
        window.location.href=$url;

    });
    //    $(".list-group li").click(function () {
    //
    //    });

    $(function(){

        $('#keyword').bind('input propertychange', function() {
            var value = $(this).val();
            $('.showrank li').each(function(){
                if($(this).html().indexOf(value) != -1)
                    $(this).show();
                else
                    $(this).hide();
            });
        });
    });


    function showrank(type){
        switch(type){
            case 'custom':
                title="客户拥有数排行";
                break;
            case 'contract':
                title="合同数排行";
                break;
            case 'contractamount':
                title="合同金额排行";
                break;
            case 'item':
                title="项目数排行";
                break;
            case 'follow':
                title="跟进排行";
                break;
        }
        window.location.href="/Crm/Index/getranklist.html?type="+type;

    }

</script>
</body>

</html>