<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>录音</title>
</head>
<body>
<div>
    <span style="white-space:pre">        </span>
    <audio controls autoplay></audio>
    <input type="button" value="开始录音" onclick="startRecording()"/>
    <input type="button" value="获取录音" onclick="obtainRecord()"/>
    <input type="button" value="停止录音" onclick="stopRecord()"/>
    <input type="button" value="播放录音" onclick="playRecord()"/>

    <video id="video1" width="320px" height="240px" controls autoplay ></video>
    <video id="video2" width="320px" height="240px" controls autoplay ></video>
    <canvas id="canvas1" width="320" height="240"></canvas>
    <input type="button" value="拍摄" onclick="scamera()"/>
    <input type="button" value="播放视频" onclick="playVideo()"/>
</div>

<script type='text/javascript' src='/Public/Crm/js/mrecorder.js'></script>


<script>

    /* 音频 */
    var recorder;
    var audio = document.querySelector('audio');

    function startRecording() {
        HZRecorder.get(function (rec) {
            recorder = rec;
            recorder.start();
        });
    }


    function obtainRecord(){
        var record = recorder.getBlob();
        debugger;
    };

    function stopRecord(){
        recorder.stop();
    };

    function playRecord(){
        recorder.play(audio);
    };

    /* 视频 */
    function scamera() {
        var videoElement = document.getElementById('video1');
        var canvasObj = document.getElementById('canvas1');
        var context1 = canvasObj.getContext('2d');
        context1.fillStyle = "#ffffff";
        context1.fillRect(0, 0, 320, 240);
        context1.drawImage(videoElement, 0, 0, 320, 240);
    };

    function playVideo(){
        var videoElement1 = document.getElementById('video1');
        var videoElement2 = document.getElementById('video2');
        videoElement2.setAttribute("src", videoElement1);
    };
</script>

</body>
</html>